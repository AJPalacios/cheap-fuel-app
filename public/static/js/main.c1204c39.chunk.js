(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,a,t){e.exports=t(363)},192:function(e,a,t){},194:function(e,a,t){},363:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(52),l=t.n(o),c=(t(192),t(16)),s=t(17),i=t(19),u=t(18),m=t(20),p=(t(194),t(379)),h=t(338),d=t(374),g=t(372),v=t(375),f=t(73),b=t.n(f),y=t(41),E=t.n(y),O="https://final-project3.herokuapp.com/auth/login",j=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={auth:{},loading:!1},t.login=function(e){e.preventDefault(),t.setState({loading:!0});var a=t.state.auth;b.a.post(O,a).then(function(e){console.log(e),E.a.success("Iniciaste sesi\xf3n correctamente"),localStorage.setItem("my-fuel-user",JSON.stringify(e.data.user)),localStorage.setItem("token",e.data.token),t.setState({loading:!1}),t.props.history.push("/profile")}).catch(function(e){E.a.error("email o contrae\xf1a incorrectos"),t.setState({loading:!1})})},t.onChange=function(e){var a=e.target.name,n=e.target.value,r=t.state.auth;r[a]=n,t.setState({auth:r})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state.loading;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Iniciar Sesi\xf3n"),r.a.createElement(d.a,{onSubmit:this.login},r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"email",label:"Email",type:"email",onChange:this.onChange,placeholder:"Email"})),r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"password",label:"Password",type:"password",onChange:this.onChange,placeholder:"Password"})),r.a.createElement(v.a,{loading:e,className:"huge ui button",type:"submit"},"Inciar Sesi\xf3n"))))}}]),a}(n.Component),w=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={signup:{username:"new username",name:"your name",email:"your email",password:"your password",password2:"confirm password"},loading:!1},t.onChange=function(e){var a=e.target.name,n=e.target.value,r=t.state.signup;r[a]=n,t.setState({signup:r})},t.createUser=function(e){e.preventDefault();var a=t.state.signup;if(a.password!==a.password2)return E.a.error("Las contrase\xf1as no coinciden");b.a.post("https://final-project3.herokuapp.com/auth/signup",a).then(function(e){console.log(e),E.a.success("Registrado correctamente")}).catch(function(e){console.log(e),E.a.error("Error al registrarte")})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.signup,t=e.loading;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Crear Cuenta"),r.a.createElement(d.a,{onSubmit:this.createUser},r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"username",label:"Username",placeholder:"@Username",type:"Text",onChange:this.onChange,value:a.username})),r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"name",label:"Nombre",placeholder:"john",type:"Text",onChange:this.onChange,value:a.name})),r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"email",label:"Email",placeholder:"user@mail.com",type:"email",onChange:this.onChange,value:a.email})),r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"password",label:"Password",placeholder:"*********",type:"password",onChange:this.onChange,value:a.password})),r.a.createElement(d.a.Field,null,r.a.createElement(g.a,{name:"password2",label:"Confirma tu password",placeholder:"*********",type:"password",onChange:this.onChange,value:a.password2})),r.a.createElement(v.a,{loading:t,className:"huge ui button",type:"submit"},"Crear Cuenta"))))}}]),a}(n.Component),C=t(373),k=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Este es mi cover page de inicio"),r.a.createElement(C.a,{className:"ui green button",to:"/login"},"Iniciar Sesi\xf3n"),r.a.createElement(C.a,{className:"ui blue button",to:"/signup"},"Crear Cuenta")))}}]),a}(n.Component),S=t(42),I=t.n(S),N=t(340),A=t(378),M=t(376),J=(t(341),function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={},t.handleItemClick=function(e,a){var n=a.name;return t.setState({activeItem:n})},t.logOut=function(e){return e.preventDefault(),localStorage.removeItem("my-fuel-user"),t.props.history.push("/login")},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement("div",null,r.a.createElement(M.a,{stackable:!0},r.a.createElement(M.a.Item,null,r.a.createElement("img",{src:"https://react.semantic-ui.com/logo.png"})),r.a.createElement(M.a.Item,{name:"mis consumos",active:"mis consumos"===e,onClick:this.handleItemClick},r.a.createElement(N.a,{to:"/mis-consumos"},"Mis Consumos")),r.a.createElement(M.a.Item,{name:"log-out",active:"log-out"===e,onClick:this.logOut},"Cerrar Sesi\xf3n")))}}]),a}(n.Component)),T=Object(A.a)(J),x=t(176),F=t.n(x);I.a.accessToken="pk.eyJ1IjoiYWRuY29kZSIsImEiOiJjam16bHJiYzEwMjI5M3Btemh5d2N3NHkyIn0.eqcpU52HvvJ8YxgGz55dpA";var L=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{}},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("my-fuel-user"));if(!e)return this.props.history.push("/login");this.setState({user:e}),this.drawMap()}},{key:"drawMap",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var a=new I.a.Map({container:"map",zoom:15,center:[e.coords.longitude,e.coords.latitude],style:"mapbox://styles/adncode/cjn7kawvq24wx2smn41yav5vs"});(new I.a.Marker).setLngLat([e.coords.longitude,e.coords.latitude]).addTo(a);a.addControl(new I.a.NavigationControl),a.addControl(new F.a({accessToken:I.a.accessToken}),"top-left");var t=new I.a.Popup({closeButton:!1,closeOnClick:!1});a.on("mouseenter","gas-layer",function(e){var n=a.queryRenderedFeatures(e.point,{layers:["gas-layer"]})[0];console.log(n.properties.address_street),a.getCanvas().style.cursor="pointer";var r=n.geometry.coordinates.slice(),o=n.properties.name,l=n.properties.address_street;for(console.log(r,o);Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;var c="<h3>".concat(o,"</h3> <br>\n                        <p>").concat(l,"</p><br>");t.setLngLat(r).setHTML(c).addTo(a)}),a.on("mouseleave","gas-layer",function(){a.getCanvas().style.cursor="",t.remove()})},function(e){alert("Please enable your gps position")},{maximumAge:6e5,timeout:5e3,enableHighAccuracy:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("div",{className:"Map",id:"map"}))}}]),a}(n.Component),P=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"User-actions"},r.a.createElement(v.a.Group,{widths:"3"},r.a.createElement(v.a,null,"Trazar Ruta"),r.a.createElement(v.a,null,"Registrar Consumo"),r.a.createElement(v.a,null,"Boton Ahorrador")))}}]),a}(n.Component),U=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{}},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){if(!JSON.parse(localStorage.getItem("my-fuel-user")))return this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(P,null))}}]),a}(n.Component),W=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={user:{}},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("my-fuel-user"));if(!e)return this.props.history.push("/login");this.setState({user:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h1",null,"Componente para consumos"))}}]),a}(r.a.Component),B=function(){return r.a.createElement(p.a,null,r.a.createElement(h.a,{exact:!0,path:"/",component:k}),r.a.createElement(h.a,{path:"/signup",component:w}),r.a.createElement(h.a,{path:"/login",component:j}),r.a.createElement(h.a,{path:"/profile",component:U}),r.a.createElement(h.a,{path:"/mis-consumos",component:W}))},H=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(B,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(354),t(356),t(359),t(361);var R=t(377);l.a.render(r.a.createElement(function(){return r.a.createElement(R.a,null,r.a.createElement(H,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[187,2,1]]]);
//# sourceMappingURL=main.c1204c39.chunk.js.map